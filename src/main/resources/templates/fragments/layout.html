<!-- layout.html -->
<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="utf-8"/>

    <!-- DEV: React Fast Refresh preamble + Vite client + entry -->
    <th:block th:replace="~{::head-dev-scripts}"></th:block>

    <title>App</title>
</head>
<body>
<div th:replace="${content}"></div>
</body>

<!-- define the fragment INSIDE layout so nothing reorders it -->
<th:block th:fragment="head-dev-scripts">
    <!-- IMPORTANT: prevent Thymeleaf from touching this block -->
    <script type="module" th:inline="none">
        import RefreshRuntime from "http://localhost:5173/@react-refresh"

        RefreshRuntime.injectIntoGlobalHook(window)
        window.$$RefreshReg$ = () => {
        }
        window.$$RefreshSig$ = () => (type) => type
        window.__vite_plugin_react_preamble_installed__ = true
    </script>
    <script type="module" src="http://localhost:5173/@vite/client"></script>
    <script type="module" src="http://localhost:5173/src/main.tsx"></script>
</th:block>
</html>
